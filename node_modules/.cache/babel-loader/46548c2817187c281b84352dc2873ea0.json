{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar _Selection = _interopRequireWildcard(require(\"./Selection\"));\n\nvar dates = _interopRequireWildcard(require(\"./utils/dates\"));\n\nvar TimeSlotUtils = _interopRequireWildcard(require(\"./utils/TimeSlots\"));\n\nvar _selection = require(\"./utils/selection\");\n\nvar _helpers = require(\"./utils/helpers\");\n\nvar DayEventLayout = _interopRequireWildcard(require(\"./utils/DayEventLayout\"));\n\nvar _TimeSlotGroup = _interopRequireDefault(require(\"./TimeSlotGroup\"));\n\nvar _TimeGridEvent = _interopRequireDefault(require(\"./TimeGridEvent\"));\n\nvar _propTypes2 = require(\"./utils/propTypes\");\n\nvar _DayColumnWrapper = _interopRequireDefault(require(\"./DayColumnWrapper\"));\n\nvar DayColumn = /*#__PURE__*/function (_React$Component) {\n  (0, _inheritsLoose2.default)(DayColumn, _React$Component);\n\n  function DayColumn() {\n    var _this;\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(_args)) || this;\n    _this.state = {\n      selecting: false,\n      timeIndicatorPosition: null\n    };\n    _this.intervalTriggered = false;\n\n    _this.renderEvents = function (_ref) {\n      var events = _ref.events,\n          isBackgroundEvent = _ref.isBackgroundEvent;\n      var _this$props = _this.props,\n          rtl = _this$props.rtl,\n          selected = _this$props.selected,\n          accessors = _this$props.accessors,\n          localizer = _this$props.localizer,\n          getters = _this$props.getters,\n          components = _this$props.components,\n          step = _this$props.step,\n          timeslots = _this$props.timeslots,\n          dayLayoutAlgorithm = _this$props.dayLayoutAlgorithm,\n          resizable = _this$props.resizable;\n\n      var _assertThisInitialize = (0, _assertThisInitialized2.default)(_this),\n          slotMetrics = _assertThisInitialize.slotMetrics;\n\n      var messages = localizer.messages;\n      var styledEvents = DayEventLayout.getStyledEvents({\n        events: events,\n        accessors: accessors,\n        slotMetrics: slotMetrics,\n        minimumStartDifference: Math.ceil(step * timeslots / 2),\n        dayLayoutAlgorithm: dayLayoutAlgorithm\n      });\n      return styledEvents.map(function (_ref2, idx) {\n        var event = _ref2.event,\n            style = _ref2.style;\n        var end = accessors.end(event);\n        var start = accessors.start(event);\n        var format = 'eventTimeRangeFormat';\n        var label;\n        var startsBeforeDay = slotMetrics.startsBeforeDay(start);\n        var startsAfterDay = slotMetrics.startsAfterDay(end);\n        if (startsBeforeDay) format = 'eventTimeRangeEndFormat';else if (startsAfterDay) format = 'eventTimeRangeStartFormat';\n        if (startsBeforeDay && startsAfterDay) label = messages.allDay;else label = localizer.format({\n          start: start,\n          end: end\n        }, format);\n        var continuesEarlier = startsBeforeDay || slotMetrics.startsBefore(start);\n        var continuesLater = startsAfterDay || slotMetrics.startsAfter(end);\n        return _react.default.createElement(_TimeGridEvent.default, {\n          style: style,\n          event: event,\n          label: label,\n          key: 'evt_' + idx,\n          getters: getters,\n          rtl: rtl,\n          components: components,\n          continuesEarlier: continuesEarlier,\n          continuesLater: continuesLater,\n          accessors: accessors,\n          selected: (0, _selection.isSelected)(event, selected),\n          onClick: function onClick(e) {\n            return _this._select(event, e);\n          },\n          onDoubleClick: function onDoubleClick(e) {\n            return _this._doubleClick(event, e);\n          },\n          isBackgroundEvent: isBackgroundEvent,\n          onKeyPress: function onKeyPress(e) {\n            return _this._keyPress(event, e);\n          },\n          resizable: resizable\n        });\n      });\n    };\n\n    _this._selectable = function () {\n      var node = (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this));\n      var selector = _this._selector = new _Selection.default(function () {\n        return (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this));\n      }, {\n        longPressThreshold: _this.props.longPressThreshold\n      });\n\n      var maybeSelect = function maybeSelect(box) {\n        var onSelecting = _this.props.onSelecting;\n        var current = _this.state || {};\n        var state = selectionState(box);\n        var start = state.startDate,\n            end = state.endDate;\n\n        if (onSelecting) {\n          if (dates.eq(current.startDate, start, 'minutes') && dates.eq(current.endDate, end, 'minutes') || onSelecting({\n            start: start,\n            end: end,\n            resourceId: _this.props.resource\n          }) === false) return;\n        }\n\n        if (_this.state.start !== state.start || _this.state.end !== state.end || _this.state.selecting !== state.selecting) {\n          _this.setState(state);\n        }\n      };\n\n      var selectionState = function selectionState(point) {\n        var currentSlot = _this.slotMetrics.closestSlotFromPoint(point, (0, _Selection.getBoundsForNode)(node));\n\n        if (!_this.state.selecting) {\n          _this._initialSlot = currentSlot;\n        }\n\n        var initialSlot = _this._initialSlot;\n\n        if (dates.lte(initialSlot, currentSlot)) {\n          currentSlot = _this.slotMetrics.nextSlot(currentSlot);\n        } else if (dates.gt(initialSlot, currentSlot)) {\n          initialSlot = _this.slotMetrics.nextSlot(initialSlot);\n        }\n\n        var selectRange = _this.slotMetrics.getRange(dates.min(initialSlot, currentSlot), dates.max(initialSlot, currentSlot));\n\n        return (0, _extends2.default)({}, selectRange, {\n          selecting: true,\n          top: selectRange.top + \"%\",\n          height: selectRange.height + \"%\"\n        });\n      };\n\n      var selectorClicksHandler = function selectorClicksHandler(box, actionType) {\n        if (!(0, _Selection.isEvent)((0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)), box)) {\n          var _selectionState = selectionState(box),\n              startDate = _selectionState.startDate,\n              endDate = _selectionState.endDate;\n\n          _this._selectSlot({\n            startDate: startDate,\n            endDate: endDate,\n            action: actionType,\n            box: box\n          });\n        }\n\n        _this.setState({\n          selecting: false\n        });\n      };\n\n      selector.on('selecting', maybeSelect);\n      selector.on('selectStart', maybeSelect);\n      selector.on('beforeSelect', function (box) {\n        if (_this.props.selectable !== 'ignoreEvents') return;\n        return !(0, _Selection.isEvent)((0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)), box);\n      });\n      selector.on('click', function (box) {\n        return selectorClicksHandler(box, 'click');\n      });\n      selector.on('doubleClick', function (box) {\n        return selectorClicksHandler(box, 'doubleClick');\n      });\n      selector.on('select', function (bounds) {\n        if (_this.state.selecting) {\n          _this._selectSlot((0, _extends2.default)({}, _this.state, {\n            action: 'select',\n            bounds: bounds\n          }));\n\n          _this.setState({\n            selecting: false\n          });\n        }\n      });\n      selector.on('reset', function () {\n        if (_this.state.selecting) {\n          _this.setState({\n            selecting: false\n          });\n        }\n      });\n    };\n\n    _this._teardownSelectable = function () {\n      if (!_this._selector) return;\n\n      _this._selector.teardown();\n\n      _this._selector = null;\n    };\n\n    _this._selectSlot = function (_ref3) {\n      var startDate = _ref3.startDate,\n          endDate = _ref3.endDate,\n          action = _ref3.action,\n          bounds = _ref3.bounds,\n          box = _ref3.box;\n      var current = startDate,\n          slots = [];\n\n      while (dates.lte(current, endDate)) {\n        slots.push(current);\n        current = new Date(+current + _this.props.step * 60 * 1000); // using Date ensures not to create an endless loop the day DST begins\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectSlot, {\n        slots: slots,\n        start: startDate,\n        end: endDate,\n        resourceId: _this.props.resource,\n        action: action,\n        bounds: bounds,\n        box: box\n      });\n    };\n\n    _this._select = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this._doubleClick = function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      (0, _helpers.notify)(_this.props.onDoubleClickEvent, args);\n    };\n\n    _this._keyPress = function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      (0, _helpers.notify)(_this.props.onKeyPressEvent, args);\n    };\n\n    _this.slotMetrics = TimeSlotUtils.getSlotMetrics(_this.props);\n    return _this;\n  }\n\n  var _proto = DayColumn.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props.selectable && this._selectable();\n\n    if (this.props.isNow) {\n      this.setTimeIndicatorPositionUpdateInterval();\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._teardownSelectable();\n\n    this.clearTimeIndicatorInterval();\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.selectable && !this.props.selectable) this._selectable();\n    if (!nextProps.selectable && this.props.selectable) this._teardownSelectable();\n    this.slotMetrics = this.slotMetrics.update(nextProps);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var getNowChanged = !dates.eq(prevProps.getNow(), this.props.getNow(), 'minutes');\n\n    if (prevProps.isNow !== this.props.isNow || getNowChanged) {\n      this.clearTimeIndicatorInterval();\n\n      if (this.props.isNow) {\n        var tail = !getNowChanged && dates.eq(prevProps.date, this.props.date, 'minutes') && prevState.timeIndicatorPosition === this.state.timeIndicatorPosition;\n        this.setTimeIndicatorPositionUpdateInterval(tail);\n      }\n    } else if (this.props.isNow && (!dates.eq(prevProps.min, this.props.min, 'minutes') || !dates.eq(prevProps.max, this.props.max, 'minutes'))) {\n      this.positionTimeIndicator();\n    }\n  }\n  /**\n   * @param tail {Boolean} - whether `positionTimeIndicator` call should be\n   *   deferred or called upon setting interval (`true` - if deferred);\n   */\n  ;\n\n  _proto.setTimeIndicatorPositionUpdateInterval = function setTimeIndicatorPositionUpdateInterval(tail) {\n    var _this2 = this;\n\n    if (tail === void 0) {\n      tail = false;\n    }\n\n    if (!this.intervalTriggered && !tail) {\n      this.positionTimeIndicator();\n    }\n\n    this._timeIndicatorTimeout = window.setTimeout(function () {\n      _this2.intervalTriggered = true;\n\n      _this2.positionTimeIndicator();\n\n      _this2.setTimeIndicatorPositionUpdateInterval();\n    }, 60000);\n  };\n\n  _proto.clearTimeIndicatorInterval = function clearTimeIndicatorInterval() {\n    this.intervalTriggered = false;\n    window.clearTimeout(this._timeIndicatorTimeout);\n  };\n\n  _proto.positionTimeIndicator = function positionTimeIndicator() {\n    var _this$props2 = this.props,\n        min = _this$props2.min,\n        max = _this$props2.max,\n        getNow = _this$props2.getNow;\n    var current = getNow();\n\n    if (current >= min && current <= max) {\n      var top = this.slotMetrics.getCurrentTimePosition(current);\n      this.intervalTriggered = true;\n      this.setState({\n        timeIndicatorPosition: top\n      });\n    } else {\n      this.clearTimeIndicatorInterval();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        date = _this$props3.date,\n        max = _this$props3.max,\n        rtl = _this$props3.rtl,\n        isNow = _this$props3.isNow,\n        resource = _this$props3.resource,\n        accessors = _this$props3.accessors,\n        localizer = _this$props3.localizer,\n        _this$props3$getters = _this$props3.getters,\n        dayProp = _this$props3$getters.dayProp,\n        getters = (0, _objectWithoutPropertiesLoose2.default)(_this$props3$getters, [\"dayProp\"]),\n        _this$props3$componen = _this$props3.components,\n        EventContainer = _this$props3$componen.eventContainerWrapper,\n        components = (0, _objectWithoutPropertiesLoose2.default)(_this$props3$componen, [\"eventContainerWrapper\"]);\n    var slotMetrics = this.slotMetrics;\n    var _this$state = this.state,\n        selecting = _this$state.selecting,\n        top = _this$state.top,\n        height = _this$state.height,\n        startDate = _this$state.startDate,\n        endDate = _this$state.endDate;\n    var selectDates = {\n      start: startDate,\n      end: endDate\n    };\n\n    var _dayProp = dayProp(max),\n        className = _dayProp.className,\n        style = _dayProp.style;\n\n    var DayColumnWrapperComponent = components.dayColumnWrapper || _DayColumnWrapper.default;\n    return _react.default.createElement(DayColumnWrapperComponent, {\n      date: date,\n      style: style,\n      className: (0, _clsx.default)(className, 'rbc-day-slot', 'rbc-time-column', isNow && 'rbc-now', isNow && 'rbc-today', // WHY\n      selecting && 'rbc-slot-selecting')\n    }, slotMetrics.groups.map(function (grp, idx) {\n      return _react.default.createElement(_TimeSlotGroup.default, {\n        key: idx,\n        group: grp,\n        resource: resource,\n        getters: getters,\n        components: components\n      });\n    }), _react.default.createElement(EventContainer, {\n      localizer: localizer,\n      resource: resource,\n      accessors: accessors,\n      getters: getters,\n      components: components,\n      slotMetrics: slotMetrics\n    }, _react.default.createElement(\"div\", {\n      className: (0, _clsx.default)('rbc-events-container', rtl && 'rtl')\n    }, this.renderEvents({\n      events: this.props.backgroundEvents,\n      isBackgroundEvent: true\n    }), this.renderEvents({\n      events: this.props.events\n    }))), selecting && _react.default.createElement(\"div\", {\n      className: \"rbc-slot-selection\",\n      style: {\n        top: top,\n        height: height\n      }\n    }, _react.default.createElement(\"span\", null, localizer.format(selectDates, 'selectRangeFormat'))), isNow && this.intervalTriggered && _react.default.createElement(\"div\", {\n      className: \"rbc-current-time-indicator\",\n      style: {\n        top: this.state.timeIndicatorPosition + \"%\"\n      }\n    }));\n  };\n\n  return DayColumn;\n}(_react.default.Component);\n\nDayColumn.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  events: _propTypes.default.array.isRequired,\n  backgroundEvents: _propTypes.default.array.isRequired,\n  step: _propTypes.default.number.isRequired,\n  date: _propTypes.default.instanceOf(Date).isRequired,\n  min: _propTypes.default.instanceOf(Date).isRequired,\n  max: _propTypes.default.instanceOf(Date).isRequired,\n  getNow: _propTypes.default.func.isRequired,\n  isNow: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  resizable: _propTypes.default.bool,\n  accessors: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  localizer: _propTypes.default.object.isRequired,\n  showMultiDayTimes: _propTypes.default.bool,\n  culture: _propTypes.default.string,\n  timeslots: _propTypes.default.number,\n  selected: _propTypes.default.object,\n  selectable: _propTypes.default.oneOf([true, false, 'ignoreEvents']),\n  eventOffset: _propTypes.default.number,\n  longPressThreshold: _propTypes.default.number,\n  onSelecting: _propTypes.default.func,\n  onSelectSlot: _propTypes.default.func.isRequired,\n  onSelectEvent: _propTypes.default.func.isRequired,\n  onDoubleClickEvent: _propTypes.default.func.isRequired,\n  onKeyPressEvent: _propTypes.default.func,\n  className: _propTypes.default.string,\n  dragThroughEvents: _propTypes.default.bool,\n  resource: _propTypes.default.any,\n  dayLayoutAlgorithm: _propTypes2.DayLayoutAlgorithmPropType\n} : {};\nDayColumn.defaultProps = {\n  dragThroughEvents: true,\n  timeslots: 2\n};\nvar _default = DayColumn;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["/home/nazaralieff/Own/App/Web/vtp21-new/node_modules/react-big-calendar/lib/DayColumn.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","exports","__esModule","default","_objectWithoutPropertiesLoose2","_extends2","_assertThisInitialized2","_inheritsLoose2","_propTypes","_react","_reactDom","_clsx","_Selection","dates","TimeSlotUtils","_selection","_helpers","DayEventLayout","_TimeSlotGroup","_TimeGridEvent","_propTypes2","_DayColumnWrapper","DayColumn","_React$Component","_this","_len","arguments","length","_args","Array","_key","call","apply","concat","state","selecting","timeIndicatorPosition","intervalTriggered","renderEvents","_ref","events","isBackgroundEvent","_this$props","props","rtl","selected","accessors","localizer","getters","components","step","timeslots","dayLayoutAlgorithm","resizable","_assertThisInitialize","slotMetrics","messages","styledEvents","getStyledEvents","minimumStartDifference","Math","ceil","map","_ref2","idx","event","style","end","start","format","label","startsBeforeDay","startsAfterDay","allDay","continuesEarlier","startsBefore","continuesLater","startsAfter","createElement","key","isSelected","onClick","e","_select","onDoubleClick","_doubleClick","onKeyPress","_keyPress","_selectable","node","findDOMNode","selector","_selector","longPressThreshold","maybeSelect","box","onSelecting","current","selectionState","startDate","endDate","eq","resourceId","resource","setState","point","currentSlot","closestSlotFromPoint","getBoundsForNode","_initialSlot","initialSlot","lte","nextSlot","gt","selectRange","getRange","min","max","top","height","selectorClicksHandler","actionType","isEvent","_selectionState","_selectSlot","action","on","selectable","bounds","_teardownSelectable","teardown","_ref3","slots","push","Date","notify","onSelectSlot","_len2","args","_key2","onSelectEvent","_len3","_key3","onDoubleClickEvent","_len4","_key4","onKeyPressEvent","getSlotMetrics","_proto","prototype","componentDidMount","isNow","setTimeIndicatorPositionUpdateInterval","componentWillUnmount","clearTimeIndicatorInterval","UNSAFE_componentWillReceiveProps","nextProps","update","componentDidUpdate","prevProps","prevState","getNowChanged","getNow","tail","date","positionTimeIndicator","_this2","_timeIndicatorTimeout","window","setTimeout","clearTimeout","_this$props2","getCurrentTimePosition","render","_this$props3","_this$props3$getters","dayProp","_this$props3$componen","EventContainer","eventContainerWrapper","_this$state","selectDates","_dayProp","className","DayColumnWrapperComponent","dayColumnWrapper","groups","grp","group","backgroundEvents","Component","propTypes","process","env","NODE_ENV","array","isRequired","number","instanceOf","func","bool","object","showMultiDayTimes","culture","string","oneOf","eventOffset","dragThroughEvents","any","DayLayoutAlgorithmPropType","defaultProps","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar _Selection = _interopRequireWildcard(require(\"./Selection\"));\n\nvar dates = _interopRequireWildcard(require(\"./utils/dates\"));\n\nvar TimeSlotUtils = _interopRequireWildcard(require(\"./utils/TimeSlots\"));\n\nvar _selection = require(\"./utils/selection\");\n\nvar _helpers = require(\"./utils/helpers\");\n\nvar DayEventLayout = _interopRequireWildcard(require(\"./utils/DayEventLayout\"));\n\nvar _TimeSlotGroup = _interopRequireDefault(require(\"./TimeSlotGroup\"));\n\nvar _TimeGridEvent = _interopRequireDefault(require(\"./TimeGridEvent\"));\n\nvar _propTypes2 = require(\"./utils/propTypes\");\n\nvar _DayColumnWrapper = _interopRequireDefault(require(\"./DayColumnWrapper\"));\n\nvar DayColumn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(DayColumn, _React$Component);\n\n  function DayColumn() {\n    var _this;\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(_args)) || this;\n    _this.state = {\n      selecting: false,\n      timeIndicatorPosition: null\n    };\n    _this.intervalTriggered = false;\n\n    _this.renderEvents = function (_ref) {\n      var events = _ref.events,\n          isBackgroundEvent = _ref.isBackgroundEvent;\n      var _this$props = _this.props,\n          rtl = _this$props.rtl,\n          selected = _this$props.selected,\n          accessors = _this$props.accessors,\n          localizer = _this$props.localizer,\n          getters = _this$props.getters,\n          components = _this$props.components,\n          step = _this$props.step,\n          timeslots = _this$props.timeslots,\n          dayLayoutAlgorithm = _this$props.dayLayoutAlgorithm,\n          resizable = _this$props.resizable;\n\n      var _assertThisInitialize = (0, _assertThisInitialized2.default)(_this),\n          slotMetrics = _assertThisInitialize.slotMetrics;\n\n      var messages = localizer.messages;\n      var styledEvents = DayEventLayout.getStyledEvents({\n        events: events,\n        accessors: accessors,\n        slotMetrics: slotMetrics,\n        minimumStartDifference: Math.ceil(step * timeslots / 2),\n        dayLayoutAlgorithm: dayLayoutAlgorithm\n      });\n      return styledEvents.map(function (_ref2, idx) {\n        var event = _ref2.event,\n            style = _ref2.style;\n        var end = accessors.end(event);\n        var start = accessors.start(event);\n        var format = 'eventTimeRangeFormat';\n        var label;\n        var startsBeforeDay = slotMetrics.startsBeforeDay(start);\n        var startsAfterDay = slotMetrics.startsAfterDay(end);\n        if (startsBeforeDay) format = 'eventTimeRangeEndFormat';else if (startsAfterDay) format = 'eventTimeRangeStartFormat';\n        if (startsBeforeDay && startsAfterDay) label = messages.allDay;else label = localizer.format({\n          start: start,\n          end: end\n        }, format);\n        var continuesEarlier = startsBeforeDay || slotMetrics.startsBefore(start);\n        var continuesLater = startsAfterDay || slotMetrics.startsAfter(end);\n        return _react.default.createElement(_TimeGridEvent.default, {\n          style: style,\n          event: event,\n          label: label,\n          key: 'evt_' + idx,\n          getters: getters,\n          rtl: rtl,\n          components: components,\n          continuesEarlier: continuesEarlier,\n          continuesLater: continuesLater,\n          accessors: accessors,\n          selected: (0, _selection.isSelected)(event, selected),\n          onClick: function onClick(e) {\n            return _this._select(event, e);\n          },\n          onDoubleClick: function onDoubleClick(e) {\n            return _this._doubleClick(event, e);\n          },\n          isBackgroundEvent: isBackgroundEvent,\n          onKeyPress: function onKeyPress(e) {\n            return _this._keyPress(event, e);\n          },\n          resizable: resizable\n        });\n      });\n    };\n\n    _this._selectable = function () {\n      var node = (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this));\n      var selector = _this._selector = new _Selection.default(function () {\n        return (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this));\n      }, {\n        longPressThreshold: _this.props.longPressThreshold\n      });\n\n      var maybeSelect = function maybeSelect(box) {\n        var onSelecting = _this.props.onSelecting;\n        var current = _this.state || {};\n        var state = selectionState(box);\n        var start = state.startDate,\n            end = state.endDate;\n\n        if (onSelecting) {\n          if (dates.eq(current.startDate, start, 'minutes') && dates.eq(current.endDate, end, 'minutes') || onSelecting({\n            start: start,\n            end: end,\n            resourceId: _this.props.resource\n          }) === false) return;\n        }\n\n        if (_this.state.start !== state.start || _this.state.end !== state.end || _this.state.selecting !== state.selecting) {\n          _this.setState(state);\n        }\n      };\n\n      var selectionState = function selectionState(point) {\n        var currentSlot = _this.slotMetrics.closestSlotFromPoint(point, (0, _Selection.getBoundsForNode)(node));\n\n        if (!_this.state.selecting) {\n          _this._initialSlot = currentSlot;\n        }\n\n        var initialSlot = _this._initialSlot;\n\n        if (dates.lte(initialSlot, currentSlot)) {\n          currentSlot = _this.slotMetrics.nextSlot(currentSlot);\n        } else if (dates.gt(initialSlot, currentSlot)) {\n          initialSlot = _this.slotMetrics.nextSlot(initialSlot);\n        }\n\n        var selectRange = _this.slotMetrics.getRange(dates.min(initialSlot, currentSlot), dates.max(initialSlot, currentSlot));\n\n        return (0, _extends2.default)({}, selectRange, {\n          selecting: true,\n          top: selectRange.top + \"%\",\n          height: selectRange.height + \"%\"\n        });\n      };\n\n      var selectorClicksHandler = function selectorClicksHandler(box, actionType) {\n        if (!(0, _Selection.isEvent)((0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)), box)) {\n          var _selectionState = selectionState(box),\n              startDate = _selectionState.startDate,\n              endDate = _selectionState.endDate;\n\n          _this._selectSlot({\n            startDate: startDate,\n            endDate: endDate,\n            action: actionType,\n            box: box\n          });\n        }\n\n        _this.setState({\n          selecting: false\n        });\n      };\n\n      selector.on('selecting', maybeSelect);\n      selector.on('selectStart', maybeSelect);\n      selector.on('beforeSelect', function (box) {\n        if (_this.props.selectable !== 'ignoreEvents') return;\n        return !(0, _Selection.isEvent)((0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)), box);\n      });\n      selector.on('click', function (box) {\n        return selectorClicksHandler(box, 'click');\n      });\n      selector.on('doubleClick', function (box) {\n        return selectorClicksHandler(box, 'doubleClick');\n      });\n      selector.on('select', function (bounds) {\n        if (_this.state.selecting) {\n          _this._selectSlot((0, _extends2.default)({}, _this.state, {\n            action: 'select',\n            bounds: bounds\n          }));\n\n          _this.setState({\n            selecting: false\n          });\n        }\n      });\n      selector.on('reset', function () {\n        if (_this.state.selecting) {\n          _this.setState({\n            selecting: false\n          });\n        }\n      });\n    };\n\n    _this._teardownSelectable = function () {\n      if (!_this._selector) return;\n\n      _this._selector.teardown();\n\n      _this._selector = null;\n    };\n\n    _this._selectSlot = function (_ref3) {\n      var startDate = _ref3.startDate,\n          endDate = _ref3.endDate,\n          action = _ref3.action,\n          bounds = _ref3.bounds,\n          box = _ref3.box;\n      var current = startDate,\n          slots = [];\n\n      while (dates.lte(current, endDate)) {\n        slots.push(current);\n        current = new Date(+current + _this.props.step * 60 * 1000); // using Date ensures not to create an endless loop the day DST begins\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectSlot, {\n        slots: slots,\n        start: startDate,\n        end: endDate,\n        resourceId: _this.props.resource,\n        action: action,\n        bounds: bounds,\n        box: box\n      });\n    };\n\n    _this._select = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this._doubleClick = function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      (0, _helpers.notify)(_this.props.onDoubleClickEvent, args);\n    };\n\n    _this._keyPress = function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      (0, _helpers.notify)(_this.props.onKeyPressEvent, args);\n    };\n\n    _this.slotMetrics = TimeSlotUtils.getSlotMetrics(_this.props);\n    return _this;\n  }\n\n  var _proto = DayColumn.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props.selectable && this._selectable();\n\n    if (this.props.isNow) {\n      this.setTimeIndicatorPositionUpdateInterval();\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._teardownSelectable();\n\n    this.clearTimeIndicatorInterval();\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.selectable && !this.props.selectable) this._selectable();\n    if (!nextProps.selectable && this.props.selectable) this._teardownSelectable();\n    this.slotMetrics = this.slotMetrics.update(nextProps);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var getNowChanged = !dates.eq(prevProps.getNow(), this.props.getNow(), 'minutes');\n\n    if (prevProps.isNow !== this.props.isNow || getNowChanged) {\n      this.clearTimeIndicatorInterval();\n\n      if (this.props.isNow) {\n        var tail = !getNowChanged && dates.eq(prevProps.date, this.props.date, 'minutes') && prevState.timeIndicatorPosition === this.state.timeIndicatorPosition;\n        this.setTimeIndicatorPositionUpdateInterval(tail);\n      }\n    } else if (this.props.isNow && (!dates.eq(prevProps.min, this.props.min, 'minutes') || !dates.eq(prevProps.max, this.props.max, 'minutes'))) {\n      this.positionTimeIndicator();\n    }\n  }\n  /**\n   * @param tail {Boolean} - whether `positionTimeIndicator` call should be\n   *   deferred or called upon setting interval (`true` - if deferred);\n   */\n  ;\n\n  _proto.setTimeIndicatorPositionUpdateInterval = function setTimeIndicatorPositionUpdateInterval(tail) {\n    var _this2 = this;\n\n    if (tail === void 0) {\n      tail = false;\n    }\n\n    if (!this.intervalTriggered && !tail) {\n      this.positionTimeIndicator();\n    }\n\n    this._timeIndicatorTimeout = window.setTimeout(function () {\n      _this2.intervalTriggered = true;\n\n      _this2.positionTimeIndicator();\n\n      _this2.setTimeIndicatorPositionUpdateInterval();\n    }, 60000);\n  };\n\n  _proto.clearTimeIndicatorInterval = function clearTimeIndicatorInterval() {\n    this.intervalTriggered = false;\n    window.clearTimeout(this._timeIndicatorTimeout);\n  };\n\n  _proto.positionTimeIndicator = function positionTimeIndicator() {\n    var _this$props2 = this.props,\n        min = _this$props2.min,\n        max = _this$props2.max,\n        getNow = _this$props2.getNow;\n    var current = getNow();\n\n    if (current >= min && current <= max) {\n      var top = this.slotMetrics.getCurrentTimePosition(current);\n      this.intervalTriggered = true;\n      this.setState({\n        timeIndicatorPosition: top\n      });\n    } else {\n      this.clearTimeIndicatorInterval();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        date = _this$props3.date,\n        max = _this$props3.max,\n        rtl = _this$props3.rtl,\n        isNow = _this$props3.isNow,\n        resource = _this$props3.resource,\n        accessors = _this$props3.accessors,\n        localizer = _this$props3.localizer,\n        _this$props3$getters = _this$props3.getters,\n        dayProp = _this$props3$getters.dayProp,\n        getters = (0, _objectWithoutPropertiesLoose2.default)(_this$props3$getters, [\"dayProp\"]),\n        _this$props3$componen = _this$props3.components,\n        EventContainer = _this$props3$componen.eventContainerWrapper,\n        components = (0, _objectWithoutPropertiesLoose2.default)(_this$props3$componen, [\"eventContainerWrapper\"]);\n    var slotMetrics = this.slotMetrics;\n    var _this$state = this.state,\n        selecting = _this$state.selecting,\n        top = _this$state.top,\n        height = _this$state.height,\n        startDate = _this$state.startDate,\n        endDate = _this$state.endDate;\n    var selectDates = {\n      start: startDate,\n      end: endDate\n    };\n\n    var _dayProp = dayProp(max),\n        className = _dayProp.className,\n        style = _dayProp.style;\n\n    var DayColumnWrapperComponent = components.dayColumnWrapper || _DayColumnWrapper.default;\n    return _react.default.createElement(DayColumnWrapperComponent, {\n      date: date,\n      style: style,\n      className: (0, _clsx.default)(className, 'rbc-day-slot', 'rbc-time-column', isNow && 'rbc-now', isNow && 'rbc-today', // WHY\n      selecting && 'rbc-slot-selecting')\n    }, slotMetrics.groups.map(function (grp, idx) {\n      return _react.default.createElement(_TimeSlotGroup.default, {\n        key: idx,\n        group: grp,\n        resource: resource,\n        getters: getters,\n        components: components\n      });\n    }), _react.default.createElement(EventContainer, {\n      localizer: localizer,\n      resource: resource,\n      accessors: accessors,\n      getters: getters,\n      components: components,\n      slotMetrics: slotMetrics\n    }, _react.default.createElement(\"div\", {\n      className: (0, _clsx.default)('rbc-events-container', rtl && 'rtl')\n    }, this.renderEvents({\n      events: this.props.backgroundEvents,\n      isBackgroundEvent: true\n    }), this.renderEvents({\n      events: this.props.events\n    }))), selecting && _react.default.createElement(\"div\", {\n      className: \"rbc-slot-selection\",\n      style: {\n        top: top,\n        height: height\n      }\n    }, _react.default.createElement(\"span\", null, localizer.format(selectDates, 'selectRangeFormat'))), isNow && this.intervalTriggered && _react.default.createElement(\"div\", {\n      className: \"rbc-current-time-indicator\",\n      style: {\n        top: this.state.timeIndicatorPosition + \"%\"\n      }\n    }));\n  };\n\n  return DayColumn;\n}(_react.default.Component);\n\nDayColumn.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  events: _propTypes.default.array.isRequired,\n  backgroundEvents: _propTypes.default.array.isRequired,\n  step: _propTypes.default.number.isRequired,\n  date: _propTypes.default.instanceOf(Date).isRequired,\n  min: _propTypes.default.instanceOf(Date).isRequired,\n  max: _propTypes.default.instanceOf(Date).isRequired,\n  getNow: _propTypes.default.func.isRequired,\n  isNow: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  resizable: _propTypes.default.bool,\n  accessors: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  localizer: _propTypes.default.object.isRequired,\n  showMultiDayTimes: _propTypes.default.bool,\n  culture: _propTypes.default.string,\n  timeslots: _propTypes.default.number,\n  selected: _propTypes.default.object,\n  selectable: _propTypes.default.oneOf([true, false, 'ignoreEvents']),\n  eventOffset: _propTypes.default.number,\n  longPressThreshold: _propTypes.default.number,\n  onSelecting: _propTypes.default.func,\n  onSelectSlot: _propTypes.default.func.isRequired,\n  onSelectEvent: _propTypes.default.func.isRequired,\n  onDoubleClickEvent: _propTypes.default.func.isRequired,\n  onKeyPressEvent: _propTypes.default.func,\n  className: _propTypes.default.string,\n  dragThroughEvents: _propTypes.default.bool,\n  resource: _propTypes.default.any,\n  dayLayoutAlgorithm: _propTypes2.DayLayoutAlgorithmPropType\n} : {};\nDayColumn.defaultProps = {\n  dragThroughEvents: true,\n  timeslots: 2\n};\nvar _default = DayColumn;\nexports.default = _default;\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}