{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar animationFrame = _interopRequireWildcard(require(\"dom-helpers/animationFrame\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _memoizeOne = _interopRequireDefault(require(\"memoize-one\"));\n\nvar dates = _interopRequireWildcard(require(\"./utils/dates\"));\n\nvar _DayColumn = _interopRequireDefault(require(\"./DayColumn\"));\n\nvar _TimeGutter = _interopRequireDefault(require(\"./TimeGutter\"));\n\nvar _width = _interopRequireDefault(require(\"dom-helpers/width\"));\n\nvar _TimeGridHeader = _interopRequireDefault(require(\"./TimeGridHeader\"));\n\nvar _helpers = require(\"./utils/helpers\");\n\nvar _eventLevels = require(\"./utils/eventLevels\");\n\nvar _Resources = _interopRequireDefault(require(\"./utils/Resources\"));\n\nvar _propTypes2 = require(\"./utils/propTypes\");\n\nvar TimeGrid = /*#__PURE__*/function (_Component) {\n  (0, _inheritsLoose2.default)(TimeGrid, _Component);\n\n  function TimeGrid(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.handleScroll = function (e) {\n      if (_this.scrollRef.current) {\n        _this.scrollRef.current.scrollLeft = e.target.scrollLeft;\n      }\n    };\n\n    _this.handleResize = function () {\n      animationFrame.cancel(_this.rafHandle);\n      _this.rafHandle = animationFrame.request(_this.checkOverflow);\n    };\n\n    _this.gutterRef = function (ref) {\n      _this.gutter = ref && (0, _reactDom.findDOMNode)(ref);\n    };\n\n    _this.handleSelectAlldayEvent = function () {\n      //cancel any pending selections so only the event click goes through.\n      _this.clearSelection();\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this.handleSelectAllDaySlot = function (slots, slotInfo) {\n      var onSelectSlot = _this.props.onSelectSlot;\n      var start = new Date(slots[0]);\n      var end = new Date(slots[slots.length - 1]);\n      end.setDate(slots[slots.length - 1].getDate() + 1);\n      (0, _helpers.notify)(onSelectSlot, {\n        slots: slots,\n        start: start,\n        end: end,\n        action: slotInfo.action,\n        resourceId: slotInfo.resourceId\n      });\n    };\n\n    _this.checkOverflow = function () {\n      if (_this._updatingOverflow) return;\n      var content = _this.contentRef.current;\n      var isOverflowing = content.scrollHeight > content.clientHeight;\n\n      if (_this.state.isOverflowing !== isOverflowing) {\n        _this._updatingOverflow = true;\n\n        _this.setState({\n          isOverflowing: isOverflowing\n        }, function () {\n          _this._updatingOverflow = false;\n        });\n      }\n    };\n\n    _this.memoizedResources = (0, _memoizeOne.default)(function (resources, accessors) {\n      return (0, _Resources.default)(resources, accessors);\n    });\n    _this.state = {\n      gutterWidth: undefined,\n      isOverflowing: null\n    };\n    _this.scrollRef = _react.default.createRef();\n    _this.contentRef = _react.default.createRef();\n    _this._scrollRatio = null;\n    return _this;\n  }\n\n  var _proto = TimeGrid.prototype;\n\n  _proto.UNSAFE_componentWillMount = function UNSAFE_componentWillMount() {\n    this.calculateScroll();\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.checkOverflow();\n\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll();\n    window.addEventListener('resize', this.handleResize);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n    animationFrame.cancel(this.rafHandle);\n\n    if (this.measureGutterAnimationFrameRequest) {\n      window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest);\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll(); //this.checkOverflow()\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    var _this$props = this.props,\n        range = _this$props.range,\n        scrollToTime = _this$props.scrollToTime; // When paginating, reset scroll\n\n    if (!dates.eq(nextProps.range[0], range[0], 'minute') || !dates.eq(nextProps.scrollToTime, scrollToTime, 'minute')) {\n      this.calculateScroll(nextProps);\n    }\n  };\n\n  _proto.renderEvents = function renderEvents(range, events, backgroundEvents, now) {\n    var _this2 = this;\n\n    var _this$props2 = this.props,\n        min = _this$props2.min,\n        max = _this$props2.max,\n        components = _this$props2.components,\n        accessors = _this$props2.accessors,\n        localizer = _this$props2.localizer,\n        dayLayoutAlgorithm = _this$props2.dayLayoutAlgorithm;\n    var resources = this.memoizedResources(this.props.resources, accessors);\n    var groupedEvents = resources.groupEvents(events);\n    var groupedBackgroundEvents = resources.groupEvents(backgroundEvents);\n    return resources.map(function (_ref, i) {\n      var id = _ref[0],\n          resource = _ref[1];\n      return range.map(function (date, jj) {\n        var daysEvents = (groupedEvents.get(id) || []).filter(function (event) {\n          return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n        });\n        var daysBackgroundEvents = (groupedBackgroundEvents.get(id) || []).filter(function (event) {\n          return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n        });\n        return _react.default.createElement(_DayColumn.default, (0, _extends2.default)({}, _this2.props, {\n          localizer: localizer,\n          min: dates.merge(date, min),\n          max: dates.merge(date, max),\n          resource: resource && id,\n          components: components,\n          isNow: dates.eq(date, now, 'day'),\n          key: i + '-' + jj,\n          date: date,\n          events: daysEvents,\n          backgroundEvents: daysBackgroundEvents,\n          dayLayoutAlgorithm: dayLayoutAlgorithm\n        }));\n      });\n    });\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        events = _this$props3.events,\n        backgroundEvents = _this$props3.backgroundEvents,\n        range = _this$props3.range,\n        width = _this$props3.width,\n        rtl = _this$props3.rtl,\n        selected = _this$props3.selected,\n        getNow = _this$props3.getNow,\n        resources = _this$props3.resources,\n        components = _this$props3.components,\n        accessors = _this$props3.accessors,\n        getters = _this$props3.getters,\n        localizer = _this$props3.localizer,\n        min = _this$props3.min,\n        max = _this$props3.max,\n        showMultiDayTimes = _this$props3.showMultiDayTimes,\n        longPressThreshold = _this$props3.longPressThreshold,\n        resizable = _this$props3.resizable;\n    width = width || this.state.gutterWidth;\n    var start = range[0],\n        end = range[range.length - 1];\n    this.slots = range.length;\n    var allDayEvents = [],\n        rangeEvents = [],\n        rangeBackgroundEvents = [];\n    events.forEach(function (event) {\n      if ((0, _eventLevels.inRange)(event, start, end, accessors)) {\n        var eStart = accessors.start(event),\n            eEnd = accessors.end(event);\n\n        if (accessors.allDay(event) || dates.isJustDate(eStart) && dates.isJustDate(eEnd) || !showMultiDayTimes && !dates.eq(eStart, eEnd, 'day')) {\n          allDayEvents.push(event);\n        } else {\n          rangeEvents.push(event);\n        }\n      }\n    });\n    backgroundEvents.forEach(function (event) {\n      if ((0, _eventLevels.inRange)(event, start, end, accessors)) {\n        rangeBackgroundEvents.push(event);\n      }\n    });\n    allDayEvents.sort(function (a, b) {\n      return (0, _eventLevels.sortEvents)(a, b, accessors);\n    });\n    return _react.default.createElement(\"div\", {\n      className: (0, _clsx.default)('rbc-time-view', resources && 'rbc-time-view-resources')\n    }, _react.default.createElement(_TimeGridHeader.default, {\n      range: range,\n      events: allDayEvents,\n      width: width,\n      rtl: rtl,\n      getNow: getNow,\n      localizer: localizer,\n      selected: selected,\n      resources: this.memoizedResources(resources, accessors),\n      selectable: this.props.selectable,\n      accessors: accessors,\n      getters: getters,\n      components: components,\n      scrollRef: this.scrollRef,\n      isOverflowing: this.state.isOverflowing,\n      longPressThreshold: longPressThreshold,\n      onSelectSlot: this.handleSelectAllDaySlot,\n      onSelectEvent: this.handleSelectAlldayEvent,\n      onDoubleClickEvent: this.props.onDoubleClickEvent,\n      onKeyPressEvent: this.props.onKeyPressEvent,\n      onDrillDown: this.props.onDrillDown,\n      getDrilldownView: this.props.getDrilldownView,\n      resizable: resizable\n    }), _react.default.createElement(\"div\", {\n      ref: this.contentRef,\n      className: \"rbc-time-content\",\n      onScroll: this.handleScroll\n    }, _react.default.createElement(_TimeGutter.default, {\n      date: start,\n      ref: this.gutterRef,\n      localizer: localizer,\n      min: dates.merge(start, min),\n      max: dates.merge(start, max),\n      step: this.props.step,\n      getNow: this.props.getNow,\n      timeslots: this.props.timeslots,\n      components: components,\n      className: \"rbc-time-gutter\",\n      getters: getters\n    }), this.renderEvents(range, rangeEvents, rangeBackgroundEvents, getNow())));\n  };\n\n  _proto.clearSelection = function clearSelection() {\n    clearTimeout(this._selectTimer);\n    this._pendingSelection = [];\n  };\n\n  _proto.measureGutter = function measureGutter() {\n    var _this3 = this;\n\n    if (this.measureGutterAnimationFrameRequest) {\n      window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest);\n    }\n\n    this.measureGutterAnimationFrameRequest = window.requestAnimationFrame(function () {\n      var width = (0, _width.default)(_this3.gutter);\n\n      if (width && _this3.state.gutterWidth !== width) {\n        _this3.setState({\n          gutterWidth: width\n        });\n      }\n    });\n  };\n\n  _proto.applyScroll = function applyScroll() {\n    if (this._scrollRatio != null) {\n      var content = this.contentRef.current;\n      content.scrollTop = content.scrollHeight * this._scrollRatio; // Only do this once\n\n      this._scrollRatio = null;\n    }\n  };\n\n  _proto.calculateScroll = function calculateScroll(props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props = props,\n        min = _props.min,\n        max = _props.max,\n        scrollToTime = _props.scrollToTime;\n    var diffMillis = scrollToTime - dates.startOf(scrollToTime, 'day');\n    var totalMillis = dates.diff(max, min);\n    this._scrollRatio = diffMillis / totalMillis;\n  };\n\n  return TimeGrid;\n}(_react.Component);\n\nexports.default = TimeGrid;\nTimeGrid.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  events: _propTypes.default.array.isRequired,\n  backgroundEvents: _propTypes.default.array.isRequired,\n  resources: _propTypes.default.array,\n  step: _propTypes.default.number,\n  timeslots: _propTypes.default.number,\n  range: _propTypes.default.arrayOf(_propTypes.default.instanceOf(Date)),\n  min: _propTypes.default.instanceOf(Date),\n  max: _propTypes.default.instanceOf(Date),\n  getNow: _propTypes.default.func.isRequired,\n  scrollToTime: _propTypes.default.instanceOf(Date),\n  showMultiDayTimes: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  resizable: _propTypes.default.bool,\n  width: _propTypes.default.number,\n  accessors: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  localizer: _propTypes.default.object.isRequired,\n  selected: _propTypes.default.object,\n  selectable: _propTypes.default.oneOf([true, false, 'ignoreEvents']),\n  longPressThreshold: _propTypes.default.number,\n  onNavigate: _propTypes.default.func,\n  onSelectSlot: _propTypes.default.func,\n  onSelectEnd: _propTypes.default.func,\n  onSelectStart: _propTypes.default.func,\n  onSelectEvent: _propTypes.default.func,\n  onDoubleClickEvent: _propTypes.default.func,\n  onKeyPressEvent: _propTypes.default.func,\n  onDrillDown: _propTypes.default.func,\n  getDrilldownView: _propTypes.default.func.isRequired,\n  dayLayoutAlgorithm: _propTypes2.DayLayoutAlgorithmPropType\n} : {};\nTimeGrid.defaultProps = {\n  step: 30,\n  timeslots: 2,\n  min: dates.startOf(new Date(), 'day'),\n  max: dates.endOf(new Date(), 'day'),\n  scrollToTime: dates.startOf(new Date(), 'day')\n};\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["/home/nazaralieff/Own/App/Web/vtp21-new/node_modules/react-big-calendar/lib/TimeGrid.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","exports","__esModule","default","_extends2","_inheritsLoose2","_propTypes","_clsx","animationFrame","_react","_reactDom","_memoizeOne","dates","_DayColumn","_TimeGutter","_width","_TimeGridHeader","_helpers","_eventLevels","_Resources","_propTypes2","TimeGrid","_Component","props","_this","call","handleScroll","e","scrollRef","current","scrollLeft","target","handleResize","cancel","rafHandle","request","checkOverflow","gutterRef","ref","gutter","findDOMNode","handleSelectAlldayEvent","clearSelection","_len","arguments","length","args","Array","_key","notify","onSelectEvent","handleSelectAllDaySlot","slots","slotInfo","onSelectSlot","start","Date","end","setDate","getDate","action","resourceId","_updatingOverflow","content","contentRef","isOverflowing","scrollHeight","clientHeight","state","setState","memoizedResources","resources","accessors","gutterWidth","undefined","createRef","_scrollRatio","_proto","prototype","UNSAFE_componentWillMount","calculateScroll","componentDidMount","width","measureGutter","applyScroll","window","addEventListener","componentWillUnmount","removeEventListener","measureGutterAnimationFrameRequest","cancelAnimationFrame","componentDidUpdate","UNSAFE_componentWillReceiveProps","nextProps","_this$props","range","scrollToTime","eq","renderEvents","events","backgroundEvents","now","_this2","_this$props2","min","max","components","localizer","dayLayoutAlgorithm","groupedEvents","groupEvents","groupedBackgroundEvents","map","_ref","i","id","resource","date","jj","daysEvents","get","filter","event","inRange","daysBackgroundEvents","createElement","merge","isNow","key","render","_this$props3","rtl","selected","getNow","getters","showMultiDayTimes","longPressThreshold","resizable","allDayEvents","rangeEvents","rangeBackgroundEvents","forEach","eStart","eEnd","allDay","isJustDate","push","sort","a","b","sortEvents","className","selectable","onDoubleClickEvent","onKeyPressEvent","onDrillDown","getDrilldownView","onScroll","step","timeslots","clearTimeout","_selectTimer","_pendingSelection","_this3","requestAnimationFrame","scrollTop","_props","diffMillis","startOf","totalMillis","diff","Component","propTypes","process","env","NODE_ENV","array","isRequired","number","arrayOf","instanceOf","func","bool","object","oneOf","onNavigate","onSelectEnd","onSelectStart","DayLayoutAlgorithmPropType","defaultProps","endOf","module"],"mappings":"AAAA;;AAEA,IAAIA,uBAAuB,GAAGC,OAAO,CAAC,+CAAD,CAArC;;AAEA,IAAIC,sBAAsB,GAAGD,OAAO,CAAC,8CAAD,CAApC;;AAEAE,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,SAAS,GAAGJ,sBAAsB,CAACD,OAAO,CAAC,gCAAD,CAAR,CAAtC;;AAEA,IAAIM,eAAe,GAAGL,sBAAsB,CAACD,OAAO,CAAC,sCAAD,CAAR,CAA5C;;AAEA,IAAIO,UAAU,GAAGN,sBAAsB,CAACD,OAAO,CAAC,YAAD,CAAR,CAAvC;;AAEA,IAAIQ,KAAK,GAAGP,sBAAsB,CAACD,OAAO,CAAC,MAAD,CAAR,CAAlC;;AAEA,IAAIS,cAAc,GAAGV,uBAAuB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAA5C;;AAEA,IAAIU,MAAM,GAAGX,uBAAuB,CAACC,OAAO,CAAC,OAAD,CAAR,CAApC;;AAEA,IAAIW,SAAS,GAAGX,OAAO,CAAC,WAAD,CAAvB;;AAEA,IAAIY,WAAW,GAAGX,sBAAsB,CAACD,OAAO,CAAC,aAAD,CAAR,CAAxC;;AAEA,IAAIa,KAAK,GAAGd,uBAAuB,CAACC,OAAO,CAAC,eAAD,CAAR,CAAnC;;AAEA,IAAIc,UAAU,GAAGb,sBAAsB,CAACD,OAAO,CAAC,aAAD,CAAR,CAAvC;;AAEA,IAAIe,WAAW,GAAGd,sBAAsB,CAACD,OAAO,CAAC,cAAD,CAAR,CAAxC;;AAEA,IAAIgB,MAAM,GAAGf,sBAAsB,CAACD,OAAO,CAAC,mBAAD,CAAR,CAAnC;;AAEA,IAAIiB,eAAe,GAAGhB,sBAAsB,CAACD,OAAO,CAAC,kBAAD,CAAR,CAA5C;;AAEA,IAAIkB,QAAQ,GAAGlB,OAAO,CAAC,iBAAD,CAAtB;;AAEA,IAAImB,YAAY,GAAGnB,OAAO,CAAC,qBAAD,CAA1B;;AAEA,IAAIoB,UAAU,GAAGnB,sBAAsB,CAACD,OAAO,CAAC,mBAAD,CAAR,CAAvC;;AAEA,IAAIqB,WAAW,GAAGrB,OAAO,CAAC,mBAAD,CAAzB;;AAEA,IAAIsB,QAAQ,GACZ,aACA,UAAUC,UAAV,EAAsB;AACpB,GAAC,GAAGjB,eAAe,CAACF,OAApB,EAA6BkB,QAA7B,EAAuCC,UAAvC;;AAEA,WAASD,QAAT,CAAkBE,KAAlB,EAAyB;AACvB,QAAIC,KAAJ;;AAEAA,IAAAA,KAAK,GAAGF,UAAU,CAACG,IAAX,CAAgB,IAAhB,EAAsBF,KAAtB,KAAgC,IAAxC;;AAEAC,IAAAA,KAAK,CAACE,YAAN,GAAqB,UAAUC,CAAV,EAAa;AAChC,UAAIH,KAAK,CAACI,SAAN,CAAgBC,OAApB,EAA6B;AAC3BL,QAAAA,KAAK,CAACI,SAAN,CAAgBC,OAAhB,CAAwBC,UAAxB,GAAqCH,CAAC,CAACI,MAAF,CAASD,UAA9C;AACD;AACF,KAJD;;AAMAN,IAAAA,KAAK,CAACQ,YAAN,GAAqB,YAAY;AAC/BxB,MAAAA,cAAc,CAACyB,MAAf,CAAsBT,KAAK,CAACU,SAA5B;AACAV,MAAAA,KAAK,CAACU,SAAN,GAAkB1B,cAAc,CAAC2B,OAAf,CAAuBX,KAAK,CAACY,aAA7B,CAAlB;AACD,KAHD;;AAKAZ,IAAAA,KAAK,CAACa,SAAN,GAAkB,UAAUC,GAAV,EAAe;AAC/Bd,MAAAA,KAAK,CAACe,MAAN,GAAeD,GAAG,IAAI,CAAC,GAAG5B,SAAS,CAAC8B,WAAd,EAA2BF,GAA3B,CAAtB;AACD,KAFD;;AAIAd,IAAAA,KAAK,CAACiB,uBAAN,GAAgC,YAAY;AAC1C;AACAjB,MAAAA,KAAK,CAACkB,cAAN;;AAEA,WAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;AACvFF,QAAAA,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;AACD;;AAED,OAAC,GAAG/B,QAAQ,CAACgC,MAAb,EAAqBzB,KAAK,CAACD,KAAN,CAAY2B,aAAjC,EAAgDJ,IAAhD;AACD,KATD;;AAWAtB,IAAAA,KAAK,CAAC2B,sBAAN,GAA+B,UAAUC,KAAV,EAAiBC,QAAjB,EAA2B;AACxD,UAAIC,YAAY,GAAG9B,KAAK,CAACD,KAAN,CAAY+B,YAA/B;AACA,UAAIC,KAAK,GAAG,IAAIC,IAAJ,CAASJ,KAAK,CAAC,CAAD,CAAd,CAAZ;AACA,UAAIK,GAAG,GAAG,IAAID,IAAJ,CAASJ,KAAK,CAACA,KAAK,CAACP,MAAN,GAAe,CAAhB,CAAd,CAAV;AACAY,MAAAA,GAAG,CAACC,OAAJ,CAAYN,KAAK,CAACA,KAAK,CAACP,MAAN,GAAe,CAAhB,CAAL,CAAwBc,OAAxB,KAAoC,CAAhD;AACA,OAAC,GAAG1C,QAAQ,CAACgC,MAAb,EAAqBK,YAArB,EAAmC;AACjCF,QAAAA,KAAK,EAAEA,KAD0B;AAEjCG,QAAAA,KAAK,EAAEA,KAF0B;AAGjCE,QAAAA,GAAG,EAAEA,GAH4B;AAIjCG,QAAAA,MAAM,EAAEP,QAAQ,CAACO,MAJgB;AAKjCC,QAAAA,UAAU,EAAER,QAAQ,CAACQ;AALY,OAAnC;AAOD,KAZD;;AAcArC,IAAAA,KAAK,CAACY,aAAN,GAAsB,YAAY;AAChC,UAAIZ,KAAK,CAACsC,iBAAV,EAA6B;AAC7B,UAAIC,OAAO,GAAGvC,KAAK,CAACwC,UAAN,CAAiBnC,OAA/B;AACA,UAAIoC,aAAa,GAAGF,OAAO,CAACG,YAAR,GAAuBH,OAAO,CAACI,YAAnD;;AAEA,UAAI3C,KAAK,CAAC4C,KAAN,CAAYH,aAAZ,KAA8BA,aAAlC,EAAiD;AAC/CzC,QAAAA,KAAK,CAACsC,iBAAN,GAA0B,IAA1B;;AAEAtC,QAAAA,KAAK,CAAC6C,QAAN,CAAe;AACbJ,UAAAA,aAAa,EAAEA;AADF,SAAf,EAEG,YAAY;AACbzC,UAAAA,KAAK,CAACsC,iBAAN,GAA0B,KAA1B;AACD,SAJD;AAKD;AACF,KAdD;;AAgBAtC,IAAAA,KAAK,CAAC8C,iBAAN,GAA0B,CAAC,GAAG3D,WAAW,CAACR,OAAhB,EAAyB,UAAUoE,SAAV,EAAqBC,SAArB,EAAgC;AACjF,aAAO,CAAC,GAAGrD,UAAU,CAAChB,OAAf,EAAwBoE,SAAxB,EAAmCC,SAAnC,CAAP;AACD,KAFyB,CAA1B;AAGAhD,IAAAA,KAAK,CAAC4C,KAAN,GAAc;AACZK,MAAAA,WAAW,EAAEC,SADD;AAEZT,MAAAA,aAAa,EAAE;AAFH,KAAd;AAIAzC,IAAAA,KAAK,CAACI,SAAN,GAAkBnB,MAAM,CAACN,OAAP,CAAewE,SAAf,EAAlB;AACAnD,IAAAA,KAAK,CAACwC,UAAN,GAAmBvD,MAAM,CAACN,OAAP,CAAewE,SAAf,EAAnB;AACAnD,IAAAA,KAAK,CAACoD,YAAN,GAAqB,IAArB;AACA,WAAOpD,KAAP;AACD;;AAED,MAAIqD,MAAM,GAAGxD,QAAQ,CAACyD,SAAtB;;AAEAD,EAAAA,MAAM,CAACE,yBAAP,GAAmC,SAASA,yBAAT,GAAqC;AACtE,SAAKC,eAAL;AACD,GAFD;;AAIAH,EAAAA,MAAM,CAACI,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,SAAK7C,aAAL;;AAEA,QAAI,KAAKb,KAAL,CAAW2D,KAAX,IAAoB,IAAxB,EAA8B;AAC5B,WAAKC,aAAL;AACD;;AAED,SAAKC,WAAL;AACAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKtD,YAAvC;AACD,GATD;;AAWA6C,EAAAA,MAAM,CAACU,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5DF,IAAAA,MAAM,CAACG,mBAAP,CAA2B,QAA3B,EAAqC,KAAKxD,YAA1C;AACAxB,IAAAA,cAAc,CAACyB,MAAf,CAAsB,KAAKC,SAA3B;;AAEA,QAAI,KAAKuD,kCAAT,EAA6C;AAC3CJ,MAAAA,MAAM,CAACK,oBAAP,CAA4B,KAAKD,kCAAjC;AACD;AACF,GAPD;;AASAZ,EAAAA,MAAM,CAACc,kBAAP,GAA4B,SAASA,kBAAT,GAA8B;AACxD,QAAI,KAAKpE,KAAL,CAAW2D,KAAX,IAAoB,IAAxB,EAA8B;AAC5B,WAAKC,aAAL;AACD;;AAED,SAAKC,WAAL,GALwD,CAKpC;AACrB,GAND;;AAQAP,EAAAA,MAAM,CAACe,gCAAP,GAA0C,SAASA,gCAAT,CAA0CC,SAA1C,EAAqD;AAC7F,QAAIC,WAAW,GAAG,KAAKvE,KAAvB;AAAA,QACIwE,KAAK,GAAGD,WAAW,CAACC,KADxB;AAAA,QAEIC,YAAY,GAAGF,WAAW,CAACE,YAF/B,CAD6F,CAGhD;;AAE7C,QAAI,CAACpF,KAAK,CAACqF,EAAN,CAASJ,SAAS,CAACE,KAAV,CAAgB,CAAhB,CAAT,EAA6BA,KAAK,CAAC,CAAD,CAAlC,EAAuC,QAAvC,CAAD,IAAqD,CAACnF,KAAK,CAACqF,EAAN,CAASJ,SAAS,CAACG,YAAnB,EAAiCA,YAAjC,EAA+C,QAA/C,CAA1D,EAAoH;AAClH,WAAKhB,eAAL,CAAqBa,SAArB;AACD;AACF,GARD;;AAUAhB,EAAAA,MAAM,CAACqB,YAAP,GAAsB,SAASA,YAAT,CAAsBH,KAAtB,EAA6BI,MAA7B,EAAqCC,gBAArC,EAAuDC,GAAvD,EAA4D;AAChF,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAIC,YAAY,GAAG,KAAKhF,KAAxB;AAAA,QACIiF,GAAG,GAAGD,YAAY,CAACC,GADvB;AAAA,QAEIC,GAAG,GAAGF,YAAY,CAACE,GAFvB;AAAA,QAGIC,UAAU,GAAGH,YAAY,CAACG,UAH9B;AAAA,QAIIlC,SAAS,GAAG+B,YAAY,CAAC/B,SAJ7B;AAAA,QAKImC,SAAS,GAAGJ,YAAY,CAACI,SAL7B;AAAA,QAMIC,kBAAkB,GAAGL,YAAY,CAACK,kBANtC;AAOA,QAAIrC,SAAS,GAAG,KAAKD,iBAAL,CAAuB,KAAK/C,KAAL,CAAWgD,SAAlC,EAA6CC,SAA7C,CAAhB;AACA,QAAIqC,aAAa,GAAGtC,SAAS,CAACuC,WAAV,CAAsBX,MAAtB,CAApB;AACA,QAAIY,uBAAuB,GAAGxC,SAAS,CAACuC,WAAV,CAAsBV,gBAAtB,CAA9B;AACA,WAAO7B,SAAS,CAACyC,GAAV,CAAc,UAAUC,IAAV,EAAgBC,CAAhB,EAAmB;AACtC,UAAIC,EAAE,GAAGF,IAAI,CAAC,CAAD,CAAb;AAAA,UACIG,QAAQ,GAAGH,IAAI,CAAC,CAAD,CADnB;AAEA,aAAOlB,KAAK,CAACiB,GAAN,CAAU,UAAUK,IAAV,EAAgBC,EAAhB,EAAoB;AACnC,YAAIC,UAAU,GAAG,CAACV,aAAa,CAACW,GAAd,CAAkBL,EAAlB,KAAyB,EAA1B,EAA8BM,MAA9B,CAAqC,UAAUC,KAAV,EAAiB;AACrE,iBAAO9G,KAAK,CAAC+G,OAAN,CAAcN,IAAd,EAAoB7C,SAAS,CAACjB,KAAV,CAAgBmE,KAAhB,CAApB,EAA4ClD,SAAS,CAACf,GAAV,CAAciE,KAAd,CAA5C,EAAkE,KAAlE,CAAP;AACD,SAFgB,CAAjB;AAGA,YAAIE,oBAAoB,GAAG,CAACb,uBAAuB,CAACS,GAAxB,CAA4BL,EAA5B,KAAmC,EAApC,EAAwCM,MAAxC,CAA+C,UAAUC,KAAV,EAAiB;AACzF,iBAAO9G,KAAK,CAAC+G,OAAN,CAAcN,IAAd,EAAoB7C,SAAS,CAACjB,KAAV,CAAgBmE,KAAhB,CAApB,EAA4ClD,SAAS,CAACf,GAAV,CAAciE,KAAd,CAA5C,EAAkE,KAAlE,CAAP;AACD,SAF0B,CAA3B;AAGA,eAAOjH,MAAM,CAACN,OAAP,CAAe0H,aAAf,CAA6BhH,UAAU,CAACV,OAAxC,EAAiD,CAAC,GAAGC,SAAS,CAACD,OAAd,EAAuB,EAAvB,EAA2BmG,MAAM,CAAC/E,KAAlC,EAAyC;AAC/FoF,UAAAA,SAAS,EAAEA,SADoF;AAE/FH,UAAAA,GAAG,EAAE5F,KAAK,CAACkH,KAAN,CAAYT,IAAZ,EAAkBb,GAAlB,CAF0F;AAG/FC,UAAAA,GAAG,EAAE7F,KAAK,CAACkH,KAAN,CAAYT,IAAZ,EAAkBZ,GAAlB,CAH0F;AAI/FW,UAAAA,QAAQ,EAAEA,QAAQ,IAAID,EAJyE;AAK/FT,UAAAA,UAAU,EAAEA,UALmF;AAM/FqB,UAAAA,KAAK,EAAEnH,KAAK,CAACqF,EAAN,CAASoB,IAAT,EAAehB,GAAf,EAAoB,KAApB,CANwF;AAO/F2B,UAAAA,GAAG,EAAEd,CAAC,GAAG,GAAJ,GAAUI,EAPgF;AAQ/FD,UAAAA,IAAI,EAAEA,IARyF;AAS/FlB,UAAAA,MAAM,EAAEoB,UATuF;AAU/FnB,UAAAA,gBAAgB,EAAEwB,oBAV6E;AAW/FhB,UAAAA,kBAAkB,EAAEA;AAX2E,SAAzC,CAAjD,CAAP;AAaD,OApBM,CAAP;AAqBD,KAxBM,CAAP;AAyBD,GAtCD;;AAwCA/B,EAAAA,MAAM,CAACoD,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,YAAY,GAAG,KAAK3G,KAAxB;AAAA,QACI4E,MAAM,GAAG+B,YAAY,CAAC/B,MAD1B;AAAA,QAEIC,gBAAgB,GAAG8B,YAAY,CAAC9B,gBAFpC;AAAA,QAGIL,KAAK,GAAGmC,YAAY,CAACnC,KAHzB;AAAA,QAIIb,KAAK,GAAGgD,YAAY,CAAChD,KAJzB;AAAA,QAKIiD,GAAG,GAAGD,YAAY,CAACC,GALvB;AAAA,QAMIC,QAAQ,GAAGF,YAAY,CAACE,QAN5B;AAAA,QAOIC,MAAM,GAAGH,YAAY,CAACG,MAP1B;AAAA,QAQI9D,SAAS,GAAG2D,YAAY,CAAC3D,SAR7B;AAAA,QASImC,UAAU,GAAGwB,YAAY,CAACxB,UAT9B;AAAA,QAUIlC,SAAS,GAAG0D,YAAY,CAAC1D,SAV7B;AAAA,QAWI8D,OAAO,GAAGJ,YAAY,CAACI,OAX3B;AAAA,QAYI3B,SAAS,GAAGuB,YAAY,CAACvB,SAZ7B;AAAA,QAaIH,GAAG,GAAG0B,YAAY,CAAC1B,GAbvB;AAAA,QAcIC,GAAG,GAAGyB,YAAY,CAACzB,GAdvB;AAAA,QAeI8B,iBAAiB,GAAGL,YAAY,CAACK,iBAfrC;AAAA,QAgBIC,kBAAkB,GAAGN,YAAY,CAACM,kBAhBtC;AAAA,QAiBIC,SAAS,GAAGP,YAAY,CAACO,SAjB7B;AAkBAvD,IAAAA,KAAK,GAAGA,KAAK,IAAI,KAAKd,KAAL,CAAWK,WAA5B;AACA,QAAIlB,KAAK,GAAGwC,KAAK,CAAC,CAAD,CAAjB;AAAA,QACItC,GAAG,GAAGsC,KAAK,CAACA,KAAK,CAAClD,MAAN,GAAe,CAAhB,CADf;AAEA,SAAKO,KAAL,GAAa2C,KAAK,CAAClD,MAAnB;AACA,QAAI6F,YAAY,GAAG,EAAnB;AAAA,QACIC,WAAW,GAAG,EADlB;AAAA,QAEIC,qBAAqB,GAAG,EAF5B;AAGAzC,IAAAA,MAAM,CAAC0C,OAAP,CAAe,UAAUnB,KAAV,EAAiB;AAC9B,UAAI,CAAC,GAAGxG,YAAY,CAACyG,OAAjB,EAA0BD,KAA1B,EAAiCnE,KAAjC,EAAwCE,GAAxC,EAA6Ce,SAA7C,CAAJ,EAA6D;AAC3D,YAAIsE,MAAM,GAAGtE,SAAS,CAACjB,KAAV,CAAgBmE,KAAhB,CAAb;AAAA,YACIqB,IAAI,GAAGvE,SAAS,CAACf,GAAV,CAAciE,KAAd,CADX;;AAGA,YAAIlD,SAAS,CAACwE,MAAV,CAAiBtB,KAAjB,KAA2B9G,KAAK,CAACqI,UAAN,CAAiBH,MAAjB,KAA4BlI,KAAK,CAACqI,UAAN,CAAiBF,IAAjB,CAAvD,IAAiF,CAACR,iBAAD,IAAsB,CAAC3H,KAAK,CAACqF,EAAN,CAAS6C,MAAT,EAAiBC,IAAjB,EAAuB,KAAvB,CAA5G,EAA2I;AACzIL,UAAAA,YAAY,CAACQ,IAAb,CAAkBxB,KAAlB;AACD,SAFD,MAEO;AACLiB,UAAAA,WAAW,CAACO,IAAZ,CAAiBxB,KAAjB;AACD;AACF;AACF,KAXD;AAYAtB,IAAAA,gBAAgB,CAACyC,OAAjB,CAAyB,UAAUnB,KAAV,EAAiB;AACxC,UAAI,CAAC,GAAGxG,YAAY,CAACyG,OAAjB,EAA0BD,KAA1B,EAAiCnE,KAAjC,EAAwCE,GAAxC,EAA6Ce,SAA7C,CAAJ,EAA6D;AAC3DoE,QAAAA,qBAAqB,CAACM,IAAtB,CAA2BxB,KAA3B;AACD;AACF,KAJD;AAKAgB,IAAAA,YAAY,CAACS,IAAb,CAAkB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChC,aAAO,CAAC,GAAGnI,YAAY,CAACoI,UAAjB,EAA6BF,CAA7B,EAAgCC,CAAhC,EAAmC7E,SAAnC,CAAP;AACD,KAFD;AAGA,WAAO/D,MAAM,CAACN,OAAP,CAAe0H,aAAf,CAA6B,KAA7B,EAAoC;AACzC0B,MAAAA,SAAS,EAAE,CAAC,GAAGhJ,KAAK,CAACJ,OAAV,EAAmB,eAAnB,EAAoCoE,SAAS,IAAI,yBAAjD;AAD8B,KAApC,EAEJ9D,MAAM,CAACN,OAAP,CAAe0H,aAAf,CAA6B7G,eAAe,CAACb,OAA7C,EAAsD;AACvD4F,MAAAA,KAAK,EAAEA,KADgD;AAEvDI,MAAAA,MAAM,EAAEuC,YAF+C;AAGvDxD,MAAAA,KAAK,EAAEA,KAHgD;AAIvDiD,MAAAA,GAAG,EAAEA,GAJkD;AAKvDE,MAAAA,MAAM,EAAEA,MAL+C;AAMvD1B,MAAAA,SAAS,EAAEA,SAN4C;AAOvDyB,MAAAA,QAAQ,EAAEA,QAP6C;AAQvD7D,MAAAA,SAAS,EAAE,KAAKD,iBAAL,CAAuBC,SAAvB,EAAkCC,SAAlC,CAR4C;AASvDgF,MAAAA,UAAU,EAAE,KAAKjI,KAAL,CAAWiI,UATgC;AAUvDhF,MAAAA,SAAS,EAAEA,SAV4C;AAWvD8D,MAAAA,OAAO,EAAEA,OAX8C;AAYvD5B,MAAAA,UAAU,EAAEA,UAZ2C;AAavD9E,MAAAA,SAAS,EAAE,KAAKA,SAbuC;AAcvDqC,MAAAA,aAAa,EAAE,KAAKG,KAAL,CAAWH,aAd6B;AAevDuE,MAAAA,kBAAkB,EAAEA,kBAfmC;AAgBvDlF,MAAAA,YAAY,EAAE,KAAKH,sBAhBoC;AAiBvDD,MAAAA,aAAa,EAAE,KAAKT,uBAjBmC;AAkBvDgH,MAAAA,kBAAkB,EAAE,KAAKlI,KAAL,CAAWkI,kBAlBwB;AAmBvDC,MAAAA,eAAe,EAAE,KAAKnI,KAAL,CAAWmI,eAnB2B;AAoBvDC,MAAAA,WAAW,EAAE,KAAKpI,KAAL,CAAWoI,WApB+B;AAqBvDC,MAAAA,gBAAgB,EAAE,KAAKrI,KAAL,CAAWqI,gBArB0B;AAsBvDnB,MAAAA,SAAS,EAAEA;AAtB4C,KAAtD,CAFI,EAyBHhI,MAAM,CAACN,OAAP,CAAe0H,aAAf,CAA6B,KAA7B,EAAoC;AACtCvF,MAAAA,GAAG,EAAE,KAAK0B,UAD4B;AAEtCuF,MAAAA,SAAS,EAAE,kBAF2B;AAGtCM,MAAAA,QAAQ,EAAE,KAAKnI;AAHuB,KAApC,EAIDjB,MAAM,CAACN,OAAP,CAAe0H,aAAf,CAA6B/G,WAAW,CAACX,OAAzC,EAAkD;AACnDkH,MAAAA,IAAI,EAAE9D,KAD6C;AAEnDjB,MAAAA,GAAG,EAAE,KAAKD,SAFyC;AAGnDsE,MAAAA,SAAS,EAAEA,SAHwC;AAInDH,MAAAA,GAAG,EAAE5F,KAAK,CAACkH,KAAN,CAAYvE,KAAZ,EAAmBiD,GAAnB,CAJ8C;AAKnDC,MAAAA,GAAG,EAAE7F,KAAK,CAACkH,KAAN,CAAYvE,KAAZ,EAAmBkD,GAAnB,CAL8C;AAMnDqD,MAAAA,IAAI,EAAE,KAAKvI,KAAL,CAAWuI,IANkC;AAOnDzB,MAAAA,MAAM,EAAE,KAAK9G,KAAL,CAAW8G,MAPgC;AAQnD0B,MAAAA,SAAS,EAAE,KAAKxI,KAAL,CAAWwI,SAR6B;AASnDrD,MAAAA,UAAU,EAAEA,UATuC;AAUnD6C,MAAAA,SAAS,EAAE,iBAVwC;AAWnDjB,MAAAA,OAAO,EAAEA;AAX0C,KAAlD,CAJC,EAgBA,KAAKpC,YAAL,CAAkBH,KAAlB,EAAyB4C,WAAzB,EAAsCC,qBAAtC,EAA6DP,MAAM,EAAnE,CAhBA,CAzBG,CAAP;AA0CD,GAxFD;;AA0FAxD,EAAAA,MAAM,CAACnC,cAAP,GAAwB,SAASA,cAAT,GAA0B;AAChDsH,IAAAA,YAAY,CAAC,KAAKC,YAAN,CAAZ;AACA,SAAKC,iBAAL,GAAyB,EAAzB;AACD,GAHD;;AAKArF,EAAAA,MAAM,CAACM,aAAP,GAAuB,SAASA,aAAT,GAAyB;AAC9C,QAAIgF,MAAM,GAAG,IAAb;;AAEA,QAAI,KAAK1E,kCAAT,EAA6C;AAC3CJ,MAAAA,MAAM,CAACK,oBAAP,CAA4B,KAAKD,kCAAjC;AACD;;AAED,SAAKA,kCAAL,GAA0CJ,MAAM,CAAC+E,qBAAP,CAA6B,YAAY;AACjF,UAAIlF,KAAK,GAAG,CAAC,GAAGnE,MAAM,CAACZ,OAAX,EAAoBgK,MAAM,CAAC5H,MAA3B,CAAZ;;AAEA,UAAI2C,KAAK,IAAIiF,MAAM,CAAC/F,KAAP,CAAaK,WAAb,KAA6BS,KAA1C,EAAiD;AAC/CiF,QAAAA,MAAM,CAAC9F,QAAP,CAAgB;AACdI,UAAAA,WAAW,EAAES;AADC,SAAhB;AAGD;AACF,KARyC,CAA1C;AASD,GAhBD;;AAkBAL,EAAAA,MAAM,CAACO,WAAP,GAAqB,SAASA,WAAT,GAAuB;AAC1C,QAAI,KAAKR,YAAL,IAAqB,IAAzB,EAA+B;AAC7B,UAAIb,OAAO,GAAG,KAAKC,UAAL,CAAgBnC,OAA9B;AACAkC,MAAAA,OAAO,CAACsG,SAAR,GAAoBtG,OAAO,CAACG,YAAR,GAAuB,KAAKU,YAAhD,CAF6B,CAEiC;;AAE9D,WAAKA,YAAL,GAAoB,IAApB;AACD;AACF,GAPD;;AASAC,EAAAA,MAAM,CAACG,eAAP,GAAyB,SAASA,eAAT,CAAyBzD,KAAzB,EAAgC;AACvD,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AACpBA,MAAAA,KAAK,GAAG,KAAKA,KAAb;AACD;;AAED,QAAI+I,MAAM,GAAG/I,KAAb;AAAA,QACIiF,GAAG,GAAG8D,MAAM,CAAC9D,GADjB;AAAA,QAEIC,GAAG,GAAG6D,MAAM,CAAC7D,GAFjB;AAAA,QAGIT,YAAY,GAAGsE,MAAM,CAACtE,YAH1B;AAIA,QAAIuE,UAAU,GAAGvE,YAAY,GAAGpF,KAAK,CAAC4J,OAAN,CAAcxE,YAAd,EAA4B,KAA5B,CAAhC;AACA,QAAIyE,WAAW,GAAG7J,KAAK,CAAC8J,IAAN,CAAWjE,GAAX,EAAgBD,GAAhB,CAAlB;AACA,SAAK5B,YAAL,GAAoB2F,UAAU,GAAGE,WAAjC;AACD,GAZD;;AAcA,SAAOpJ,QAAP;AACD,CA1SD,CA0SEZ,MAAM,CAACkK,SA1ST,CAFA;;AA8SA1K,OAAO,CAACE,OAAR,GAAkBkB,QAAlB;AACAA,QAAQ,CAACuJ,SAAT,GAAqBC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC;AAC3D5E,EAAAA,MAAM,EAAE7F,UAAU,CAACH,OAAX,CAAmB6K,KAAnB,CAAyBC,UAD0B;AAE3D7E,EAAAA,gBAAgB,EAAE9F,UAAU,CAACH,OAAX,CAAmB6K,KAAnB,CAAyBC,UAFgB;AAG3D1G,EAAAA,SAAS,EAAEjE,UAAU,CAACH,OAAX,CAAmB6K,KAH6B;AAI3DlB,EAAAA,IAAI,EAAExJ,UAAU,CAACH,OAAX,CAAmB+K,MAJkC;AAK3DnB,EAAAA,SAAS,EAAEzJ,UAAU,CAACH,OAAX,CAAmB+K,MAL6B;AAM3DnF,EAAAA,KAAK,EAAEzF,UAAU,CAACH,OAAX,CAAmBgL,OAAnB,CAA2B7K,UAAU,CAACH,OAAX,CAAmBiL,UAAnB,CAA8B5H,IAA9B,CAA3B,CANoD;AAO3DgD,EAAAA,GAAG,EAAElG,UAAU,CAACH,OAAX,CAAmBiL,UAAnB,CAA8B5H,IAA9B,CAPsD;AAQ3DiD,EAAAA,GAAG,EAAEnG,UAAU,CAACH,OAAX,CAAmBiL,UAAnB,CAA8B5H,IAA9B,CARsD;AAS3D6E,EAAAA,MAAM,EAAE/H,UAAU,CAACH,OAAX,CAAmBkL,IAAnB,CAAwBJ,UAT2B;AAU3DjF,EAAAA,YAAY,EAAE1F,UAAU,CAACH,OAAX,CAAmBiL,UAAnB,CAA8B5H,IAA9B,CAV6C;AAW3D+E,EAAAA,iBAAiB,EAAEjI,UAAU,CAACH,OAAX,CAAmBmL,IAXqB;AAY3DnD,EAAAA,GAAG,EAAE7H,UAAU,CAACH,OAAX,CAAmBmL,IAZmC;AAa3D7C,EAAAA,SAAS,EAAEnI,UAAU,CAACH,OAAX,CAAmBmL,IAb6B;AAc3DpG,EAAAA,KAAK,EAAE5E,UAAU,CAACH,OAAX,CAAmB+K,MAdiC;AAe3D1G,EAAAA,SAAS,EAAElE,UAAU,CAACH,OAAX,CAAmBoL,MAAnB,CAA0BN,UAfsB;AAgB3DvE,EAAAA,UAAU,EAAEpG,UAAU,CAACH,OAAX,CAAmBoL,MAAnB,CAA0BN,UAhBqB;AAiB3D3C,EAAAA,OAAO,EAAEhI,UAAU,CAACH,OAAX,CAAmBoL,MAAnB,CAA0BN,UAjBwB;AAkB3DtE,EAAAA,SAAS,EAAErG,UAAU,CAACH,OAAX,CAAmBoL,MAAnB,CAA0BN,UAlBsB;AAmB3D7C,EAAAA,QAAQ,EAAE9H,UAAU,CAACH,OAAX,CAAmBoL,MAnB8B;AAoB3D/B,EAAAA,UAAU,EAAElJ,UAAU,CAACH,OAAX,CAAmBqL,KAAnB,CAAyB,CAAC,IAAD,EAAO,KAAP,EAAc,cAAd,CAAzB,CApB+C;AAqB3DhD,EAAAA,kBAAkB,EAAElI,UAAU,CAACH,OAAX,CAAmB+K,MArBoB;AAsB3DO,EAAAA,UAAU,EAAEnL,UAAU,CAACH,OAAX,CAAmBkL,IAtB4B;AAuB3D/H,EAAAA,YAAY,EAAEhD,UAAU,CAACH,OAAX,CAAmBkL,IAvB0B;AAwB3DK,EAAAA,WAAW,EAAEpL,UAAU,CAACH,OAAX,CAAmBkL,IAxB2B;AAyB3DM,EAAAA,aAAa,EAAErL,UAAU,CAACH,OAAX,CAAmBkL,IAzByB;AA0B3DnI,EAAAA,aAAa,EAAE5C,UAAU,CAACH,OAAX,CAAmBkL,IA1ByB;AA2B3D5B,EAAAA,kBAAkB,EAAEnJ,UAAU,CAACH,OAAX,CAAmBkL,IA3BoB;AA4B3D3B,EAAAA,eAAe,EAAEpJ,UAAU,CAACH,OAAX,CAAmBkL,IA5BuB;AA6B3D1B,EAAAA,WAAW,EAAErJ,UAAU,CAACH,OAAX,CAAmBkL,IA7B2B;AA8B3DzB,EAAAA,gBAAgB,EAAEtJ,UAAU,CAACH,OAAX,CAAmBkL,IAAnB,CAAwBJ,UA9BiB;AA+B3DrE,EAAAA,kBAAkB,EAAExF,WAAW,CAACwK;AA/B2B,CAAxC,GAgCjB,EAhCJ;AAiCAvK,QAAQ,CAACwK,YAAT,GAAwB;AACtB/B,EAAAA,IAAI,EAAE,EADgB;AAEtBC,EAAAA,SAAS,EAAE,CAFW;AAGtBvD,EAAAA,GAAG,EAAE5F,KAAK,CAAC4J,OAAN,CAAc,IAAIhH,IAAJ,EAAd,EAA0B,KAA1B,CAHiB;AAItBiD,EAAAA,GAAG,EAAE7F,KAAK,CAACkL,KAAN,CAAY,IAAItI,IAAJ,EAAZ,EAAwB,KAAxB,CAJiB;AAKtBwC,EAAAA,YAAY,EAAEpF,KAAK,CAAC4J,OAAN,CAAc,IAAIhH,IAAJ,EAAd,EAA0B,KAA1B;AALQ,CAAxB;AAOAuI,MAAM,CAAC9L,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar animationFrame = _interopRequireWildcard(require(\"dom-helpers/animationFrame\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _memoizeOne = _interopRequireDefault(require(\"memoize-one\"));\n\nvar dates = _interopRequireWildcard(require(\"./utils/dates\"));\n\nvar _DayColumn = _interopRequireDefault(require(\"./DayColumn\"));\n\nvar _TimeGutter = _interopRequireDefault(require(\"./TimeGutter\"));\n\nvar _width = _interopRequireDefault(require(\"dom-helpers/width\"));\n\nvar _TimeGridHeader = _interopRequireDefault(require(\"./TimeGridHeader\"));\n\nvar _helpers = require(\"./utils/helpers\");\n\nvar _eventLevels = require(\"./utils/eventLevels\");\n\nvar _Resources = _interopRequireDefault(require(\"./utils/Resources\"));\n\nvar _propTypes2 = require(\"./utils/propTypes\");\n\nvar TimeGrid =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(TimeGrid, _Component);\n\n  function TimeGrid(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.handleScroll = function (e) {\n      if (_this.scrollRef.current) {\n        _this.scrollRef.current.scrollLeft = e.target.scrollLeft;\n      }\n    };\n\n    _this.handleResize = function () {\n      animationFrame.cancel(_this.rafHandle);\n      _this.rafHandle = animationFrame.request(_this.checkOverflow);\n    };\n\n    _this.gutterRef = function (ref) {\n      _this.gutter = ref && (0, _reactDom.findDOMNode)(ref);\n    };\n\n    _this.handleSelectAlldayEvent = function () {\n      //cancel any pending selections so only the event click goes through.\n      _this.clearSelection();\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this.handleSelectAllDaySlot = function (slots, slotInfo) {\n      var onSelectSlot = _this.props.onSelectSlot;\n      var start = new Date(slots[0]);\n      var end = new Date(slots[slots.length - 1]);\n      end.setDate(slots[slots.length - 1].getDate() + 1);\n      (0, _helpers.notify)(onSelectSlot, {\n        slots: slots,\n        start: start,\n        end: end,\n        action: slotInfo.action,\n        resourceId: slotInfo.resourceId\n      });\n    };\n\n    _this.checkOverflow = function () {\n      if (_this._updatingOverflow) return;\n      var content = _this.contentRef.current;\n      var isOverflowing = content.scrollHeight > content.clientHeight;\n\n      if (_this.state.isOverflowing !== isOverflowing) {\n        _this._updatingOverflow = true;\n\n        _this.setState({\n          isOverflowing: isOverflowing\n        }, function () {\n          _this._updatingOverflow = false;\n        });\n      }\n    };\n\n    _this.memoizedResources = (0, _memoizeOne.default)(function (resources, accessors) {\n      return (0, _Resources.default)(resources, accessors);\n    });\n    _this.state = {\n      gutterWidth: undefined,\n      isOverflowing: null\n    };\n    _this.scrollRef = _react.default.createRef();\n    _this.contentRef = _react.default.createRef();\n    _this._scrollRatio = null;\n    return _this;\n  }\n\n  var _proto = TimeGrid.prototype;\n\n  _proto.UNSAFE_componentWillMount = function UNSAFE_componentWillMount() {\n    this.calculateScroll();\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.checkOverflow();\n\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll();\n    window.addEventListener('resize', this.handleResize);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n    animationFrame.cancel(this.rafHandle);\n\n    if (this.measureGutterAnimationFrameRequest) {\n      window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest);\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll(); //this.checkOverflow()\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    var _this$props = this.props,\n        range = _this$props.range,\n        scrollToTime = _this$props.scrollToTime; // When paginating, reset scroll\n\n    if (!dates.eq(nextProps.range[0], range[0], 'minute') || !dates.eq(nextProps.scrollToTime, scrollToTime, 'minute')) {\n      this.calculateScroll(nextProps);\n    }\n  };\n\n  _proto.renderEvents = function renderEvents(range, events, backgroundEvents, now) {\n    var _this2 = this;\n\n    var _this$props2 = this.props,\n        min = _this$props2.min,\n        max = _this$props2.max,\n        components = _this$props2.components,\n        accessors = _this$props2.accessors,\n        localizer = _this$props2.localizer,\n        dayLayoutAlgorithm = _this$props2.dayLayoutAlgorithm;\n    var resources = this.memoizedResources(this.props.resources, accessors);\n    var groupedEvents = resources.groupEvents(events);\n    var groupedBackgroundEvents = resources.groupEvents(backgroundEvents);\n    return resources.map(function (_ref, i) {\n      var id = _ref[0],\n          resource = _ref[1];\n      return range.map(function (date, jj) {\n        var daysEvents = (groupedEvents.get(id) || []).filter(function (event) {\n          return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n        });\n        var daysBackgroundEvents = (groupedBackgroundEvents.get(id) || []).filter(function (event) {\n          return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n        });\n        return _react.default.createElement(_DayColumn.default, (0, _extends2.default)({}, _this2.props, {\n          localizer: localizer,\n          min: dates.merge(date, min),\n          max: dates.merge(date, max),\n          resource: resource && id,\n          components: components,\n          isNow: dates.eq(date, now, 'day'),\n          key: i + '-' + jj,\n          date: date,\n          events: daysEvents,\n          backgroundEvents: daysBackgroundEvents,\n          dayLayoutAlgorithm: dayLayoutAlgorithm\n        }));\n      });\n    });\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        events = _this$props3.events,\n        backgroundEvents = _this$props3.backgroundEvents,\n        range = _this$props3.range,\n        width = _this$props3.width,\n        rtl = _this$props3.rtl,\n        selected = _this$props3.selected,\n        getNow = _this$props3.getNow,\n        resources = _this$props3.resources,\n        components = _this$props3.components,\n        accessors = _this$props3.accessors,\n        getters = _this$props3.getters,\n        localizer = _this$props3.localizer,\n        min = _this$props3.min,\n        max = _this$props3.max,\n        showMultiDayTimes = _this$props3.showMultiDayTimes,\n        longPressThreshold = _this$props3.longPressThreshold,\n        resizable = _this$props3.resizable;\n    width = width || this.state.gutterWidth;\n    var start = range[0],\n        end = range[range.length - 1];\n    this.slots = range.length;\n    var allDayEvents = [],\n        rangeEvents = [],\n        rangeBackgroundEvents = [];\n    events.forEach(function (event) {\n      if ((0, _eventLevels.inRange)(event, start, end, accessors)) {\n        var eStart = accessors.start(event),\n            eEnd = accessors.end(event);\n\n        if (accessors.allDay(event) || dates.isJustDate(eStart) && dates.isJustDate(eEnd) || !showMultiDayTimes && !dates.eq(eStart, eEnd, 'day')) {\n          allDayEvents.push(event);\n        } else {\n          rangeEvents.push(event);\n        }\n      }\n    });\n    backgroundEvents.forEach(function (event) {\n      if ((0, _eventLevels.inRange)(event, start, end, accessors)) {\n        rangeBackgroundEvents.push(event);\n      }\n    });\n    allDayEvents.sort(function (a, b) {\n      return (0, _eventLevels.sortEvents)(a, b, accessors);\n    });\n    return _react.default.createElement(\"div\", {\n      className: (0, _clsx.default)('rbc-time-view', resources && 'rbc-time-view-resources')\n    }, _react.default.createElement(_TimeGridHeader.default, {\n      range: range,\n      events: allDayEvents,\n      width: width,\n      rtl: rtl,\n      getNow: getNow,\n      localizer: localizer,\n      selected: selected,\n      resources: this.memoizedResources(resources, accessors),\n      selectable: this.props.selectable,\n      accessors: accessors,\n      getters: getters,\n      components: components,\n      scrollRef: this.scrollRef,\n      isOverflowing: this.state.isOverflowing,\n      longPressThreshold: longPressThreshold,\n      onSelectSlot: this.handleSelectAllDaySlot,\n      onSelectEvent: this.handleSelectAlldayEvent,\n      onDoubleClickEvent: this.props.onDoubleClickEvent,\n      onKeyPressEvent: this.props.onKeyPressEvent,\n      onDrillDown: this.props.onDrillDown,\n      getDrilldownView: this.props.getDrilldownView,\n      resizable: resizable\n    }), _react.default.createElement(\"div\", {\n      ref: this.contentRef,\n      className: \"rbc-time-content\",\n      onScroll: this.handleScroll\n    }, _react.default.createElement(_TimeGutter.default, {\n      date: start,\n      ref: this.gutterRef,\n      localizer: localizer,\n      min: dates.merge(start, min),\n      max: dates.merge(start, max),\n      step: this.props.step,\n      getNow: this.props.getNow,\n      timeslots: this.props.timeslots,\n      components: components,\n      className: \"rbc-time-gutter\",\n      getters: getters\n    }), this.renderEvents(range, rangeEvents, rangeBackgroundEvents, getNow())));\n  };\n\n  _proto.clearSelection = function clearSelection() {\n    clearTimeout(this._selectTimer);\n    this._pendingSelection = [];\n  };\n\n  _proto.measureGutter = function measureGutter() {\n    var _this3 = this;\n\n    if (this.measureGutterAnimationFrameRequest) {\n      window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest);\n    }\n\n    this.measureGutterAnimationFrameRequest = window.requestAnimationFrame(function () {\n      var width = (0, _width.default)(_this3.gutter);\n\n      if (width && _this3.state.gutterWidth !== width) {\n        _this3.setState({\n          gutterWidth: width\n        });\n      }\n    });\n  };\n\n  _proto.applyScroll = function applyScroll() {\n    if (this._scrollRatio != null) {\n      var content = this.contentRef.current;\n      content.scrollTop = content.scrollHeight * this._scrollRatio; // Only do this once\n\n      this._scrollRatio = null;\n    }\n  };\n\n  _proto.calculateScroll = function calculateScroll(props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props = props,\n        min = _props.min,\n        max = _props.max,\n        scrollToTime = _props.scrollToTime;\n    var diffMillis = scrollToTime - dates.startOf(scrollToTime, 'day');\n    var totalMillis = dates.diff(max, min);\n    this._scrollRatio = diffMillis / totalMillis;\n  };\n\n  return TimeGrid;\n}(_react.Component);\n\nexports.default = TimeGrid;\nTimeGrid.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  events: _propTypes.default.array.isRequired,\n  backgroundEvents: _propTypes.default.array.isRequired,\n  resources: _propTypes.default.array,\n  step: _propTypes.default.number,\n  timeslots: _propTypes.default.number,\n  range: _propTypes.default.arrayOf(_propTypes.default.instanceOf(Date)),\n  min: _propTypes.default.instanceOf(Date),\n  max: _propTypes.default.instanceOf(Date),\n  getNow: _propTypes.default.func.isRequired,\n  scrollToTime: _propTypes.default.instanceOf(Date),\n  showMultiDayTimes: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  resizable: _propTypes.default.bool,\n  width: _propTypes.default.number,\n  accessors: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  localizer: _propTypes.default.object.isRequired,\n  selected: _propTypes.default.object,\n  selectable: _propTypes.default.oneOf([true, false, 'ignoreEvents']),\n  longPressThreshold: _propTypes.default.number,\n  onNavigate: _propTypes.default.func,\n  onSelectSlot: _propTypes.default.func,\n  onSelectEnd: _propTypes.default.func,\n  onSelectStart: _propTypes.default.func,\n  onSelectEvent: _propTypes.default.func,\n  onDoubleClickEvent: _propTypes.default.func,\n  onKeyPressEvent: _propTypes.default.func,\n  onDrillDown: _propTypes.default.func,\n  getDrilldownView: _propTypes.default.func.isRequired,\n  dayLayoutAlgorithm: _propTypes2.DayLayoutAlgorithmPropType\n} : {};\nTimeGrid.defaultProps = {\n  step: 30,\n  timeslots: 2,\n  min: dates.startOf(new Date(), 'day'),\n  max: dates.endOf(new Date(), 'day'),\n  scrollToTime: dates.startOf(new Date(), 'day')\n};\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}